{"ast":null,"code":"import _slicedToArray from \"/Users/robsonsilvajunior/Projects/Mainframe/social-lending-dapp/packages/dapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/robsonsilvajunior/Projects/Mainframe/social-lending-dapp/packages/dapp/src/pages/Dashboard.js\";\nimport React, { useState, useContext, useEffect } from 'react'; // import styled from 'styled-components'\n\nimport MainframeContext from '../contexts/Mainframe';\nimport { abi, contractAddress } from '../abi'; // const Container = styled.View`\n//   flex: 1;\n//   flex-direction: row;\n//   width: 300px;\n//   height: 300px;\n//   background-color: #262626;\n// `\n\nexport default function Dashboard() {\n  const _useContext = useContext(MainframeContext),\n        sdk = _useContext.sdk,\n        web3 = _useContext.web3;\n\n  const _useState = useState(false),\n        _useState2 = _slicedToArray(_useState, 2),\n        showNewLoan = _useState2[0],\n        setShowNewLoan = _useState2[1];\n\n  const _useState3 = useState(''),\n        _useState4 = _slicedToArray(_useState3, 2),\n        selectedContact = _useState4[0],\n        setSelectedContact = _useState4[1];\n\n  const _useState5 = useState(0),\n        _useState6 = _slicedToArray(_useState5, 2),\n        loanAmount = _useState6[0],\n        setLoanAmount = _useState6[1];\n\n  const _useState7 = useState(),\n        _useState8 = _slicedToArray(_useState7, 2),\n        loanDueDate = _useState8[0],\n        setLoanDueDate = _useState8[1];\n\n  const _useState9 = useState(false),\n        _useState10 = _slicedToArray(_useState9, 2),\n        loadingStatus = _useState10[0],\n        setLoadingStatus = _useState10[1];\n\n  const _useState11 = useState(false),\n        _useState12 = _slicedToArray(_useState11, 2),\n        showMsg = _useState12[0],\n        setShowMsg = _useState12[1];\n\n  const _useState13 = useState(),\n        _useState14 = _slicedToArray(_useState13, 2),\n        contract = _useState14[0],\n        setContract = _useState14[1];\n\n  useEffect(() => {\n    const initializeContract = async () => {\n      const contract = new web3.eth.Contract(abi, contractAddress);\n      setContract(contract);\n    };\n\n    initializeContract();\n  }, [web3]);\n\n  const _useState15 = useState(),\n        _useState16 = _slicedToArray(_useState15, 2),\n        ownAccount = _useState16[0],\n        setOwnAccount = _useState16[1];\n\n  useEffect(() => {\n    const initializeOwnAccount = async () => {\n      const ownAccount = await sdk.ethereum.getDefaultAccount();\n      setOwnAccount(ownAccount);\n    };\n\n    initializeOwnAccount();\n  }, [sdk]);\n\n  const _useState17 = useState([]),\n        _useState18 = _slicedToArray(_useState17, 2),\n        loans = _useState18[0],\n        setLoans = _useState18[1];\n\n  useEffect(() => {\n    if (!contract || !ownAccount) return;\n\n    const fetchForLoans = async () => {\n      const newLoans = await contract.methods.getLoanAtAddress(ownAccount).call(); // const editedNewLoans = typeof newLoans === 'func a' : Object.entries(newLoans)\n      //  $FlowFixMe\n\n      setLoans(Object.entries(newLoans));\n    };\n\n    fetchForLoans();\n  }, [contract]);\n\n  async function selectContactFromMainframe() {\n    const contact = await sdk.contacts.selectContact();\n\n    if (contact) {\n      const ethAddress = contact.data.profile.ethAddress;\n\n      if (!ethAddress) {//error msg\n        // console.log('The selected contact does not have a public ETH address')\n      } else {\n        setSelectedContact(ethAddress);\n      }\n    }\n  }\n\n  async function createNewLoanContract(event) {\n    event.preventDefault();\n    setLoadingStatus(true);\n\n    if (contract) {\n      const writeLoan = await contract.methods.requestLoanRob(selectedContact, loanAmount).send({\n        from: ownAccount\n      });\n\n      if (writeLoan) {\n        setShowMsg(true);\n        setShowNewLoan(false);\n        setLoadingStatus(false);\n      } else {// error msg\n      }\n\n      setTimeout(() => {\n        setShowMsg(false);\n      }, 3000);\n    }\n  }\n\n  if (loadingStatus) return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95\n    },\n    __self: this\n  }, \"Loading...\");\n  return React.createElement(\"div\", {\n    className: \"App\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97\n    },\n    __self: this\n  }, React.createElement(\"h1\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98\n    },\n    __self: this\n  }, showMsg ? 'Loan created successfully!' : ''), React.createElement(\"h1\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99\n    },\n    __self: this\n  }, \"My Loans\"), loans.map((loan, key) => React.createElement(\"div\", {\n    key: key,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101\n    },\n    __self: this\n  }, loan)), showNewLoan ? React.createElement(\"form\", {\n    style: {\n      justifyContent: 'center'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"form-container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"row-item\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107\n    },\n    __self: this\n  }, \"Lender\"), React.createElement(\"button\", {\n    type: \"button\",\n    onClick: selectContactFromMainframe,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108\n    },\n    __self: this\n  }, \"Select your Friend\"), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111\n    },\n    __self: this\n  }, selectedContact)), React.createElement(\"div\", {\n    className: \"row-item\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114\n    },\n    __self: this\n  }, \"Amount (DAI)\"), React.createElement(\"input\", {\n    value: loanAmount,\n    onChange: e => setLoanAmount(e.target.value),\n    type: \"text\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"row-item\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122\n    },\n    __self: this\n  }, \"Due Date\"), React.createElement(\"input\", {\n    value: loanDueDate,\n    onChange: e => setLoanDueDate(e.target.value),\n    type: \"date\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"row-item\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130\n    },\n    __self: this\n  }, \"Payment Plan\"), React.createElement(\"input\", {\n    disabled: true,\n    type: \"text\",\n    value: 'One time',\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"row-item\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134\n    },\n    __self: this\n  }, \"Interest\"), React.createElement(\"input\", {\n    disabled: true,\n    type: \"text\",\n    value: '1.27%',\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"row-item\",\n    style: {\n      marginTop: '15px'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138\n    },\n    __self: this\n  }, \"Total Debit Value: \", calcDebt(loanAmount))), React.createElement(\"button\", {\n    onClick: event => createNewLoanContract(event),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140\n    },\n    __self: this\n  }, ' ', \"Send Loan Request\"))) : React.createElement(\"button\", {\n    type: \"button\",\n    onClick: () => setShowNewLoan(true),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147\n    },\n    __self: this\n  }, ' ', \"New Loan\", ' '));\n}\n\nfunction calcDebt(amount) {\n  const interest = 0.0127;\n  const newAmount = amount * (1 + interest);\n  return newAmount;\n}","map":{"version":3,"sources":["/Users/robsonsilvajunior/Projects/Mainframe/social-lending-dapp/packages/dapp/src/pages/Dashboard.js"],"names":["React","useState","useContext","useEffect","MainframeContext","abi","contractAddress","Dashboard","sdk","web3","showNewLoan","setShowNewLoan","selectedContact","setSelectedContact","loanAmount","setLoanAmount","loanDueDate","setLoanDueDate","loadingStatus","setLoadingStatus","showMsg","setShowMsg","contract","setContract","initializeContract","eth","Contract","ownAccount","setOwnAccount","initializeOwnAccount","ethereum","getDefaultAccount","loans","setLoans","fetchForLoans","newLoans","methods","getLoanAtAddress","call","Object","entries","selectContactFromMainframe","contact","contacts","selectContact","ethAddress","data","profile","createNewLoanContract","event","preventDefault","writeLoan","requestLoanRob","send","from","setTimeout","map","loan","key","justifyContent","e","target","value","marginTop","calcDebt","amount","interest","newAmount"],"mappings":"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","sourcesContent":["// @flow\nimport React, { useState, useContext, useEffect } from 'react'\n// import styled from 'styled-components'\nimport MainframeContext from '../contexts/Mainframe'\n\nimport { abi, contractAddress } from '../abi'\n\n// const Container = styled.View`\n//   flex: 1;\n//   flex-direction: row;\n//   width: 300px;\n//   height: 300px;\n//   background-color: #262626;\n// `\n\nexport default function Dashboard () {\n  const { sdk, web3 } = useContext(MainframeContext)\n  const [showNewLoan, setShowNewLoan] = useState(false)\n  const [selectedContact, setSelectedContact] = useState('')\n  const [loanAmount, setLoanAmount] = useState(0)\n  const [loanDueDate, setLoanDueDate] = useState()\n  const [loadingStatus, setLoadingStatus] = useState(false)\n  const [showMsg, setShowMsg] = useState(false)\n\n  const [contract, setContract] = useState()\n  useEffect(() => {\n    const initializeContract = async () => {\n      const contract = new web3.eth.Contract(abi, contractAddress)\n      setContract(contract)\n    }\n    initializeContract()\n  }, [web3])\n\n  const [ownAccount, setOwnAccount] = useState()\n  useEffect(() => {\n    const initializeOwnAccount = async () => {\n      const ownAccount = await sdk.ethereum.getDefaultAccount()\n      setOwnAccount(ownAccount)\n    }\n    initializeOwnAccount()\n  }, [sdk])\n\n  const [loans, setLoans] = useState([])\n  useEffect(() => {\n    if (!contract || !ownAccount) return\n\n    const fetchForLoans = async () => {\n      const newLoans = await contract.methods\n        .getLoanAtAddress(ownAccount)\n        .call()\n\n      // const editedNewLoans = typeof newLoans === 'func a' : Object.entries(newLoans)\n      //  $FlowFixMe\n      setLoans(Object.entries(newLoans))\n    }\n    fetchForLoans()\n  }, [contract])\n\n  async function selectContactFromMainframe () {\n    const contact = await sdk.contacts.selectContact()\n    if (contact) {\n      const { ethAddress } = contact.data.profile\n      if (!ethAddress) {\n        //error msg\n        // console.log('The selected contact does not have a public ETH address')\n      } else {\n        setSelectedContact(ethAddress)\n      }\n    }\n  }\n\n  async function createNewLoanContract (event) {\n    event.preventDefault()\n    setLoadingStatus(true)\n    if (contract) {\n      const writeLoan = await contract.methods\n        .requestLoanRob(selectedContact, loanAmount)\n        .send({ from: ownAccount })\n\n      if (writeLoan) {\n        setShowMsg(true)\n        setShowNewLoan(false)\n        setLoadingStatus(false)\n      } else {\n        // error msg\n      }\n\n\n      setTimeout(() => {\n        setShowMsg(false)\n      }, 3000)\n    }\n  }\n\n  if (loadingStatus) return <div>Loading...</div>\n  return (\n    <div className=\"App\">\n      <h1>{showMsg ? 'Loan created successfully!' : ''}</h1>\n      <h1>My Loans</h1>\n      {loans.map((loan, key) => (\n        <div key={key}>{loan}</div>\n      ))}\n      {showNewLoan ? (\n        <form style={{ justifyContent: 'center' }}>\n          <div className=\"form-container\">\n            <div className=\"row-item\">\n              <div>Lender</div>\n              <button type=\"button\" onClick={selectContactFromMainframe}>\n                Select your Friend\n              </button>\n              <div>{selectedContact}</div>\n            </div>\n            <div className=\"row-item\">\n              <div>Amount (DAI)</div>\n              <input\n                value={loanAmount}\n                onChange={e => setLoanAmount(e.target.value)}\n                type=\"text\"\n              />\n            </div>\n            <div className=\"row-item\">\n              <div>Due Date</div>\n              <input\n                value={loanDueDate}\n                onChange={e => setLoanDueDate(e.target.value)}\n                type=\"date\"\n              />\n            </div>\n            <div className=\"row-item\">\n              <div>Payment Plan</div>\n              <input disabled type=\"text\" value={'One time'} />\n            </div>\n            <div className=\"row-item\">\n              <div>Interest</div>\n              <input disabled type=\"text\" value={'1.27%'} />\n            </div>\n            <div className=\"row-item\" style={{ marginTop: '15px' }}>\n              <div>Total Debit Value: {calcDebt(loanAmount)}</div>\n            </div>\n            <button onClick={event => createNewLoanContract(event)}>\n              {' '}\n              Send Loan Request\n            </button>\n          </div>\n        </form>\n      ) : (\n        <button type=\"button\" onClick={() => setShowNewLoan(true)}>\n          {' '}\n          New Loan{' '}\n        </button>\n      )}\n    </div>\n  )\n}\n\nfunction calcDebt (amount) {\n  const interest = 0.0127\n  const newAmount = amount * (1 + interest)\n  return newAmount\n}\n"]},"metadata":{},"sourceType":"module"}